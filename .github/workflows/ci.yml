name: tests

on:
    push:
        branches: [main]
        tags: ["v*"]
    pull_request:

jobs:
    test:
        runs-on: ${{ matrix.os }}
        strategy:
            fail-fast: false
            matrix:
                os: [ubuntu-latest, macos-latest, windows-latest]
        steps:
            - name: Checkout code
              uses: actions/checkout@v5

            - name: Setup Rust
              uses: actions-rust-lang/setup-rust-toolchain@v1

            - name: Install enchant (macOS)
              if: matrix.os == 'macos-latest'
              run: brew install enchant

            - name: Install libenchant-dev (linux)
              if: matrix.os == 'ubuntu-latest'
              run: sudo apt install libenchant-2-dev

            - name: Run tests
              run: cargo test
